<div id="<%= dom_id @location %>_overview">
  <%= turbo_frame_tag "location_details" do %>
    <%= render "tabs", selected_tab: "overview" %>
    
    <div class="container pt-6">
      <p>
        <strong>Peak Bloom Months:</strong>
        <%= @overview[:peak_bloom_months].present? ? @overview[:peak_bloom_months].join(', ') : 'No data available' %>
      </p>
      <p>
        <strong>Dominant Colors:</strong>
        <%= @overview[:dominant_bloom_colors].present? ? @overview[:dominant_bloom_colors].join(', ') : 'No data available' %>
      </p>

      <div class="timeline-container">
        <div class="timeline">
          <% Date::ABBR_MONTHNAMES.compact.each do |month| %>
            <div class="month-header"><%= month %></div>
          <% end %>

          <% @overview[:plants_with_bloom_periods].each do |plant_info| %>
            <% (plant_info[:bloom_start] - 1).times do |i| %>
              <div class="border-r"></div>
            <% end %>

            <% span = plant_info[:bloom_end] - plant_info[:bloom_start] + 1 %>
            <div style="grid-column: <%= plant_info[:bloom_start] %> / span <%= span %>;" class="interval">
              <%= plant_info[:common_name] %>
            </div>

            <% (12 - plant_info[:bloom_end]).times do |i| %>
              <div class="border-l"></div>
            <% end %>
          <% end %>
        </div>
      </div>
    </div>
  <% end %>
</div>
