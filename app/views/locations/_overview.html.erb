<div class="w-full">
  <%= turbo_frame_tag "overview" do %>
    <p>
      <strong>Peak Bloom Months:</strong>
      <%= @overview[:peak_bloom_months].present? ? @overview[:peak_bloom_months].join(', ') : 'No data available' %>
    </p>
    <p>
      <strong>Dominant Colors:</strong>
      <%= @overview[:dominant_bloom_colors].present? ? @overview[:dominant_bloom_colors].join(', ') : 'No data available' %>
    </p>
    <%= line_chart plant_bloom_lines(@location), 
      xtitle: "Month", 
      ytitle: "Plants", 
      height: "300px", 
      library: { 
        scales: { 
          x: {
            type: 'category',
            labels: Date::ABBR_MONTHNAMES.compact,
            title: { display: true, text: "Bloom Time" }
          },
          y: {
            min: 0,
            max: @location.plants.count + 1,
            title: { display: false },
            ticks: { display: false },
            grid: { display: false }
          }
        },
        elements: {
          line: {
            tension: 0,
            borderWidth: 5
          }
        },
        legend: {
          display: true, # Show legend to match plants with lines
          position: 'right'
        }
      } 
    %>
  <% end %>
</div>
